@using System.Linq
@using AutoRest.ObjC
@using AutoRest.Core.Model
@using AutoRest.ObjC.Model
@using AutoRest.ObjC.Templates
@using AutoRest.Core.Utilities

@inherits AutoRest.Core.Template<AutoRest.ObjC.Model.CompositeTypeObjC>

@Header("// ")
@EmptyLine
#import "@(Model.Name).h"
@EmptyLine
@@implementation @(Model.Name)

@if (Model.Properties.Any(p => p.IsConstant) || Model.GenerateConstructorForRequiredProperties) {
    if (Model.GenerateConstructorForRequiredProperties) {
    @:- (id) init@(Model.RequiredPropertiesConstructorDeclaration) {
        @:self = [super init];
        @:if (self) {
        foreach (var property in Model.Properties.Where(p => p.IsRequired && !p.IsConstant)) {
            @:_@(property.Name) = @property.Name;
        }
        @:}
        @:return self;
    @:}
    }
}

@foreach (PropertyObjC property in Model.Properties) {

if (!property.IsReadOnly && !(property.IsRequired && Model.GenerateConstructorForRequiredProperties)) {
@EmptyLine
    @:- (@(Model.Name)*) with@(property.Name.ToPascalCase()): (@property.ModelTypeName) @property.Name {
        @:_@(property.Name) = @property.Name;
        @:return self;
    @:}
}

}

@EmptyLine
@@end
